-- ===================================================================
-- 家計簿アプリケーション - Supabaseデータインポート
-- 注意: スキーマ作成後に実行すること
-- ===================================================================

-- 既存データのクリア（必要に応じて）
-- DELETE FROM tb_info_kanri;

-- データインポート（RenderのPostgreSQLから取得した実データ）
INSERT INTO tb_info_kanri (id, user_id, type, amount, category, registed_at, created_at, updated_at) VALUES
(1, 'test-user-1', '収入', 300000, '給与', '2025-06-01', '2025-06-22T07:05:13.668073Z', '2025-06-22T07:05:13.668073Z'),
(2, 'test-user-1', '支出', 80000, '家賃', '2025-06-01', '2025-06-22T07:05:13.668073Z', '2025-06-22T07:05:13.668073Z'),
(3, 'test-user-1', '支出', 15000, '食費', '2025-06-15', '2025-06-22T07:05:13.668073Z', '2025-06-22T07:05:13.668073Z'),
(4, 'test-user-1', '収入', 5000, 'アルバイト', '2025-06-20', '2025-06-22T07:05:13.668073Z', '2025-06-22T07:05:13.668073Z'),
(5, 'anonymous_user_1750578046222', '収入', 400000, '給料', '2025-06-23', '2025-06-22T15:53:37.845175Z', '2025-06-22T15:53:37.845175Z'),
(6, 'anonymous_user_1750630057641', '支出', 20000, '美容', '2025-06-23', '2025-06-22T22:07:38.526776Z', '2025-06-22T22:07:38.526776Z'),
(7, 'anonymous_user_1750630057641', '収入', 300000, '給料', '2025-05-23', '2025-06-22T22:08:38.483855Z', '2025-06-22T22:08:38.483855Z'),
(8, 'anonymous_user_1750630057641', '支出', 4300, '食事', '2025-06-09', '2025-06-22T22:10:57.674946Z', '2025-06-22T22:10:57.674946Z'),
(9, 'anonymous_user_1750630057641', '支出', 80000, '住居費', '2025-06-27', '2025-06-22T22:11:18.282395Z', '2025-06-22T22:11:18.282395Z'),
(10, 'anonymous_user_1750630057641', '支出', 20000, '光熱費', '2025-06-27', '2025-06-22T22:11:39.994705Z', '2025-06-22T22:11:39.994705Z'),
(11, 'anonymous_user_1750630057641', '支出', 44000, 'その他', '2025-06-14', '2025-06-22T22:12:09.586967Z', '2025-06-22T22:12:09.586967Z'),
(12, 'anonymous_user_1750630057641', '支出', 80000, '住居費', '2025-05-27', '2025-06-22T22:13:05.197248Z', '2025-06-22T22:13:05.197248Z'),
(13, 'anonymous_user_1750630057641', '支出', 20000, '光熱費', '2025-05-27', '2025-06-22T22:13:22.437768Z', '2025-06-22T22:13:22.437768Z'),
(14, 'anonymous_user_1750578046222', '収入', 1888, '臨時収入', '2025-06-23', '2025-06-22T23:55:53.783423Z', '2025-06-22T23:55:53.783423Z'),
(15, 'anonymous_user_1750630057641', '支出', 5480, '通信費', '2025-06-24', '2025-06-23T16:07:36.966549Z', '2025-06-23T16:07:36.966549Z'),
(16, 'anonymous_user_1751189804501', '支出', 1483240, '医療費', '2024-12-27', '2025-06-29T10:27:34.46969Z', '2025-06-29T10:27:34.46969Z'),
(17, 'anonymous_user_1751189804501', '支出', 2322, '光熱費', '2025-07-16', '2025-07-04T09:49:08.862846Z', '2025-07-04T09:49:08.862846Z'),
(18, 'anonymous_user_1751189804501', '支出', 3974, '食事', '2025-07-25', '2025-07-04T09:49:30.878606Z', '2025-07-04T09:49:30.878606Z'),
(19, 'anonymous_user_1751189804501', '支出', 5258, '通信費', '2025-07-25', '2025-07-04T09:49:52.948115Z', '2025-07-04T09:49:52.948115Z'),
(20, 'anonymous_user_1751189804501', '支出', 82820, '住居費', '2025-07-25', '2025-07-04T09:50:09.978665Z', '2025-07-04T09:50:09.978665Z'),
(21, 'anonymous_user_1751189804501', '支出', 2930, '食事', '2025-07-01', '2025-07-04T09:51:16.562278Z', '2025-07-04T09:51:16.562278Z');

-- シーケンスの現在値を最大IDに更新
SELECT setval('tb_info_kanri_id_seq', (SELECT MAX(id) FROM tb_info_kanri));

-- データインポート確認
SELECT 
    COUNT(*) as total_records,
    COUNT(CASE WHEN type = '収入' THEN 1 END) as income_records,
    COUNT(CASE WHEN type = '支出' THEN 1 END) as expense_records,
    SUM(CASE WHEN type = '収入' THEN amount ELSE 0 END) as total_income,
    SUM(CASE WHEN type = '支出' THEN amount ELSE 0 END) as total_expense
FROM tb_info_kanri;

-- 最新のレコードを表示
SELECT * FROM tb_info_kanri ORDER BY id DESC LIMIT 5;
